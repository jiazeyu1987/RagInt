## 展厅讲解智能体 TODO

> 目标：更像“展厅讲解员”，可控（时长/风格/路线）、可打断续讲、可追溯、可运营。

### P0（容易，优先做）

- 展厅讲解模式（前端开关 + 时长/风格）：把“用展厅讲解口吻、控制时长、分段输出、不要编造”等指令附加到问题里。
- 快捷指令按钮：`继续讲解`、`下一站`、`上一站`、`换个说法(更通俗/更专业)`、`30秒总结`（点击仅填入输入框，用户手动提交）。
- 用户偏好持久化：讲解模式/时长/风格/语音播报开关等保存到 `localStorage`。
- 历史/运营基础：问题历史（已实现）+ 热门问题排序（已实现）+ 一键回填（已实现）。

### P1（中等）

- 讲解路线/展区结构：支持选择“展区/展品”，按路线输出并维护当前位置（支持“回到刚才继续讲”）。
- 打断与续讲：新问题提交时停止 TTS、终止旧的 RAG/TTS 流程；回答后可续讲。
- 来源引用展示：回答附带“引用来源/证据片段”展示与一键展开（需要 RAGFlow 支持/解析 reference）。
- 多轮记忆：记住用户偏好（风格、关注点、是否解释术语、是否给对比表）并在后续对话持续生效。

### P2（较难/依赖外部）

- Agent 模式可用性：RAGFlow `/api/v1/agents/{id}/completions` 目前无任何 SSE body（lines=0 bytes=0），需要先修 RAGFlow 端或对齐其真实输出协议。
- 多模态：扫码/拍照识别展品 → 自动定位知识点（需要额外服务/模型与数据映射）。
- 运营监控面板：ASR/RAG/TTS 耗时、失败率、满意度、未命中问题聚类、日志检索。

