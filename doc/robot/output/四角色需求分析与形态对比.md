# 四角色需求分析与机器人形态对比（展厅机器人）

基于：
- `doc/robot/用户需求.md`
- `doc/robot/软件需求文档.md`
- `doc/robot/系统需求文档.md`

目标：从公司/观众/运维/开发四类角色出发，尽可能穷举“想让机器人做什么、有什么需求与痛点”，并把“机器人形态（随动/固定站台/PAD 等）”的优劣与交付路径（用户需求→设计需求→参数）串起来，便于立项与方案取舍。

---

## 1. 四类角色视角：要什么、怕什么、怎么做才像“可交付产品”

### 1.1 公司（甲方/管理层/品牌与预算）

**希望机器人做到**
- 形象一致：外观、语音、讲解口径统一，尽量不“翻车”。
- 标准化复制：同一套站点/脚本/配置，可在不同展厅快速复用。
- 可控投入：一次建设后长期复用；Token、运维、人力投入可预测。
- 风险可控：不涉及人脸/身份信息；敏感问题不乱答；出现异常时仍能把参观“带完”。

**需求清单（尽量多列）**
- 讲解质量：清晰、结构化、节奏可控（快/标准/深度档）。
- 统一口径：版本化（资料更新有版本号）、可回滚；可追溯来源（至少运维侧可定位）。
- 预算与ROI：人力替代程度可估算；设备/软件/内容/运维长期成本模型明确。
- 兼容性：对接现有底盘/导航/音频硬件/网络；能在内网或本机部署（云端可选）。
- 合规：默认不采集、不存储身份类视觉；日志脱敏；密钥轮换与权限分离。
- 可验收：有明确验收口径与检查表（打断、降级、到站、稳定性等）。

**主要痛点**
- 人工讲解不稳定（口径不一、培训成本、离职/排班问题）。
- 现场网络/音频抖动导致体验差，直接影响公司形象。
- 内容更新难（资料多、版本多、更新后缺少抽检与回滚）。

**公司视角下“可做成什么样子”**
- 优先“稳态产品”：讲解与问答受控（展厅域内），异常时降级到离线讲解/文本/人工接管。
- 形象优先策略：不确定就明确说明并引导人工确认，避免“胡编式智能”。

---

### 1.2 观众（来访者：新员工/代理商/大客户/政府官员等）

**希望机器人做到**
- 讲解连贯：跨站停顿短、过渡自然、不重复固定话术。
- 能提问：打断立即生效；旧播报立即停止；问答结束后能自然接回讲解。
- 可信：回答不确定会承认并引导确认；不答非所问；不过度冗长。
- 到站准确：讲解与位置匹配；移动失败有明确提示，不“假到站讲解”。

**需求清单（尽量多列）**
- 交互：一问即停、可重复问、可追问、可让它“用一句话先总结”。
- 语音体验：无白噪音、不卡顿；首句尽快可听；音量合适。
- 讲解深度分层（按观众类型）：
  - 新员工：术语解释、流程化、可重复训练。
  - 代理商：卖点/方案组合/交付支持/常见对比。
  - 大客户：指标、兼容性、ROI、实施周期、风险与保障；更强调证据与引用。
  - 政府官员：合规、安全、社会价值；措辞更谨慎，敏感问题更保守。
- 可预期：明确提示当前状态（移动中/讲解中/听取中/异常/离线模式）。

**主要痛点**
- 白噪音/卡顿/延迟导致尴尬；打断后旧音频仍播放。
- 回答过度自信但不可信；或太专业/太浅导致“听不懂/没价值”。
- 站点错位（到站不准/识别不准）造成体验断裂。

---

### 1.3 运维/运营（现场场控、讲解员、IT 运维）

**希望机器人做到**
- 一键可控：开始/暂停/继续/跳站/重置；必要时“手动讲解兜底”。
- 快速排障：一键诊断、日志导出、事件时间线；能定位“是网络/知识库/ASR/TTS/音频/导航哪一段出问题”。
- 可降级继续服务：外网抖动时仍能完成讲解（离线预录音/本地脚本/仅文本）。
- 长时间稳定：至少 8h 运行不明显衰减；出现衰减能通过指标定位。

**需求清单（尽量多列）**
- 可观测：阶段耗时（首句延迟/首包延迟）、失败原因、重试次数、当前状态、request_id 追踪。
- 故障SOP：常见问题处理步骤（音频设备、网络、外部服务、离线资源缺失）。
- 配置管理：站点清单、站点顺序、每站时长、导航点位映射可导入导出与备份。
- 现场控场：多人围观场景的打断冷却/优先级（可开关）。

**主要痛点**
- 现场异常难复现；链路多且耦合，靠“经验拍脑袋”排障。
- 外网抖动导致核心能力不可用；降级/恢复流程不闭环。

---

### 1.4 开发/交付（研发、集成、测试、交付工程师）

**希望机器人做到**
- 架构可插拔：导航/ASR/TTS/RAG provider 可替换；本地/云端切换成本低。
- 可测可回归：关键路径（打断/继续/降级/到站）可重复验证；有清晰的验收口径与自动/半自动检查表。
- 内容工程可控：资料清洗、分段、元数据、版本化、回滚、抽检流程可执行。
- 安全合规：密钥不落库不落日志；权限分离（只读 vs 导入/管理）；审计留痕。

**主要痛点**
- “体验翻车”往往来自取消语义不一致（SSE/TTS/播放器/导航/ASR 任一没停干净）。
- 内容更新后效果不可控，缺少“抽检+回滚+引用追溯”的工程闭环。

---

## 2. 机器人形态矩阵：随动/固定路线/固定站台/PAD 等怎么选

### 2.1 形态清单（从低风险到高风险）

1) **固定站台（讲解亭/桌面终端/语音交互点）**
- 定位：不移动，提供讲解与问答；用大屏/小屏引导站点选择。

2) **PAD 导览（Pad/手机 App + 可选语音）**
- 定位：以“内容与问答”为主，不强调实体机器人；可叠加简单引导（地图/路线）。

3) **固定路线移动机器人（到站讲解）**
- 定位：按站点前往/到站再讲解；以稳定为第一目标（与 `doc/robot/用户需求.md` 更一致）。

4) **召唤式移动（点选站点→机器人前往）**
- 定位：不做持续跟随；由观众或运营选择下一站，机器人再移动。

5) **随动/跟随机器人（人走到哪，机器人跟到哪）**
- 定位：自由参观更自然，但对底盘/感知/安全依赖大，交付风险高。

6) **混合形态（移动导览 + 远程/人工接管 + 多端协同）**
- 定位：重要接待场景更稳：机器人负责“标准讲解+带路”，复杂/敏感问题可转人工或保守回答。

---

### 2.2 各形态优劣与适用场景

| 形态 | 优点 | 缺点/风险 | 适用场景 | 关键交付点（必须具备） |
|---|---|---|---|---|
| 固定站台 | 最稳定、成本低、音频与网络可控、维护简单 | 缺少“带路”与机器人观感；动线组织弱 | 空间拥挤/移动风险高/预算敏感 | UI 引导站点选择；问答边界与兜底；离线可用 |
| PAD 导览 | 部署快、复制成本低、更新方便 | 沉浸感弱；依赖观众主动操作；对现场导览组织帮助有限 | 多展厅快速铺开、培训/讲义类 | 内容分层、离线包、账号/权限与数据安全 |
| 固定路线移动（到站讲解） | 兼顾“机器人观感+稳定”；验收口径清晰 | 需要站点标定与到站判定；路线变化需维护 | 路线固定、站点明确（3–10） | 到站再讲解；移动失败不假讲；全链路可打断 |
| 召唤式移动 | 比跟随更稳；更适配临时动线 | 仍需移动稳定；交互设计要避免混乱 | VIP/领导临时变更路线 | 站点选择与状态提示；取消移动语义一致 |
| 随动/跟随 | 自由参观更自然；“像真人讲解员” | 安全/跟丢/遮挡/定位风险高；验收难；易翻车影响形象 | 低人流、硬件强、预算足、对“互动”要求极高 | 跟随安全策略；拥挤降级；跟丢处理；明确禁用边界 |
| 混合形态 | 形象最稳；复杂问题可控；可渐进式迭代 | 需要流程与一定人力；系统要支持接管 | 重要接待、政府/大客户 | 一键转人工/保守回答；接管不中断体验；审计与记录 |

---

### 2.3 “是否需要跟随”的决策建议（把争论变成可选项）

**需要跟随的理由（收益）**
- 观众自由参观，导览更自然；VIP 临时改变动线时更顺滑。

**不建议本期做跟随的理由（风险）**
- 展厅“同一房间、路线固定”场景下，固定路线已满足核心目标；
- 跟随对感知/安全/底盘能力依赖大，交付风险高，一旦翻车直接伤害品牌形象。

**折中方案（更容易交付）**
- 先做“固定路线移动 / 召唤式移动”，把“跟随”作为后续增强项；
- 做“半跟随”：仅跟到下一个站点入口，到站后仍按固定点位讲解。

---

## 3. 需求 → 设计 → 参数：把“想要”落到可验收的工程项

### 3.1 用户需求：讲解连贯性与提问（打断机制）

**用户需求（观众/公司）**
- 讲解不断档、过渡自然；提问能立刻打断；问答后能自然接回讲解。

**对应设计需求（软件）**
- 全链路取消：RAG SSE、TTS 生成、音频播放、ASR 录音/上传/识别、移动（如在移动）均可被取消。
- 讲解分段与预取：按段/句输出与播报；跨站承接策略减少重复欢迎/过渡话术。
- 状态机与可视化：移动中/讲解中/听取中/问答中/离线模式/异常。

**可参数化/可验收指标（示例，可按现场调整）**
- 打断到“音频停止”的最大时延：`<= 1s`（或现场可接受阈值）。
- 首句可听（从点击开始/到站触发到第一句可播）的目标：`P50 < 6s`（网络允许时）。
- 过渡话术重复率：连续多站讲解中，固定过渡词出现次数受控（可通过脚本抽检）。
- 切站口径：切站后旧音频不得继续播放；目标站点讲解从站点开头开始且不串台。

---

### 3.2 用户需求：公司形象（“不胡说、可控、可复制”）

**用户需求（公司）**
- 统一口径、可信；错误时宁可保守；可复制到更多展厅。

**对应设计需求**
- 回答可信策略：不确定时明确说明并引导人工确认；敏感问题限制回答范围。
- 内容工程：知识库/脚本版本化、增量更新、回滚；抽检流程与记录。
- 离线兜底：网络或外部服务不可用时仍能完成讲解（预录音/本地脚本文本）。

**可参数化/可验收指标**
- 外部服务失败阈值与降级策略：连续失败 `N` 次进入离线模式；退出离线需人工确认/探测恢复。
- 内容版本：每次更新必须有 `version/date/operator`；支持一键回滚到上一版。
- 引用/追溯：运维侧可看到回答来源（至少文档名/版本/片段ID）。

---

### 3.3 用户需求：后期维护与更新频率（运维视角）

**用户需求（运维）**
- 出问题能定位；能持续运行；升级可回退；配置能备份复用。

**对应设计需求**
- 一键诊断、日志导出、事件时间线；按 request_id 追踪关键耗时与失败原因。
- 配置导入导出；站点与导航点位映射可管理；离线资源清单可校验。

**可参数化/可验收指标**
- 健康检查：`/api/health` 必须包含基础依赖状态与 uptime。
- 事件导出：单次请求能导出 NDJSON 事件；包含关键阶段耗时。
- 稳定性：长时间运行（如 8h）无明显内存泄漏/连接累积（可作为专项验收）。

---

## 4. 推荐交付路线（先明确用户需求，再到产品/设计）

### 4.1 建议默认形态（本期最稳）

**固定路线移动机器人（到站讲解） + 离线兜底 + 可控问答**
- 原因：与当前用户需求边界一致，验收口径清晰；可最大化“稳定与形象”。

### 4.2 可选增强（按风险逐步叠加）

1) PAD 导览（作为第二端）：用于预览路线、查看图文、辅助分层讲解与问答输入兜底。
2) 召唤式移动：支持 VIP 临时选站，仍不做持续跟随。
3) 混合形态：敏感/复杂问题一键转人工，确保形象不翻车。
4) 随动/跟随：仅在底盘/感知成熟且安全策略充分时再进入范围，并明确验收边界与降级策略。

---

## 5. 附：四角色“需求-痛点-功能”快速对照（可直接做评审清单）

| 角色 | 需求 | 痛点 | 对应功能/设计点 |
|---|---|---|---|
| 公司 | 形象一致、可复制、成本可控、合规 | 网络/链路翻车影响形象；内容更新不可控 | 受控问答+离线兜底；版本化与回滚；安全与审计 |
| 观众 | 连贯讲解、随时提问、可信回答、到站准确 | 白噪音/卡顿；打断不生效；答非所问 | 流式TTS+可抢占停止；全链路取消；分层讲解模板 |
| 运维 | 一键可控、可观测、可排障、可降级 | 异常难定位；外网抖动不可用 | 一键诊断/日志/事件；离线资源清单；状态可视化 |
| 开发 | 可插拔、可测、可回归、内容工程化 | 取消语义不一致；内容更新后效果不可控 | 状态机+request_id；抽检/回滚/引用；适配器架构 |

